var h=(g,m,o)=>new Promise((u,r)=>{var l=t=>{try{i(o.next(t))}catch(n){r(n)}},d=t=>{try{i(o.throw(t))}catch(n){r(n)}},i=t=>t.done?u(t.value):Promise.resolve(t.value).then(l,d);i((o=o.apply(g,m)).next())});import{$ as c,E as C}from"./bootstrap-CRMPbCAg.js";import"./css-Y7-lT1k2.js";import{u as y}from"./vxe-table-3fC9prEm.js";import{u as b,g as x,_ as k,d as D}from"./form.vue_vue_type_script_setup_true_lang-C71DUwgI.js";import{ElButton as M}from"./index-BBB7ueyP.js";import{_ as E}from"./page.vue_vue_type_script_setup_true_lang-Jfv2R4fZ.js";import{e as V,v as A,j as S,I as f,y as p,u as s,x as $,t as q}from"../jse/index-index-BLEn1CMS.js";import{u as B}from"./use-modal-DkICd823.js";import{P as F}from"./plus-B6jBz6Ip.js";import"./loading-BJEPGsK4.js";import"./index-DVO058gF.js";import"./debounce-DNXs5Rvf.js";import"./index-CQxSKuWz.js";import"./scroll-xfvYtqVg.js";import"./index-DVi7n050.js";import"./use-form-item-C8EWOxB0.js";import"./use-form-common-props-H4BW1-Nh.js";import"./x-CYHklmN4.js";const Y=V({__name:"list",setup(g){const[m,o]=B({connectedComponent:k,destroyOnClose:!0});function u(e){o.setData(e).open()}function r(e){o.setData({pid:e.id}).open()}function l(){o.setData(null).open()}function d(e){const a=C.loading({message:c("ui.actionMessage.deleting",[e.name]),duration:0});D(e.id).then(()=>{a.close(),C.success({message:c("ui.actionMessage.deleteSuccess",[e.name])}),_()}).catch(()=>{a.close()})}function i({code:e,row:a}){switch(e){case"append":{r(a);break}case"delete":{d(a);break}case"edit":{u(a);break}}}const[t,n]=y({gridEvents:{},gridOptions:{columns:b(i),height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:e=>h(null,null,function*(){return yield x()})}},toolbarConfig:{custom:!0,export:!1,refresh:{code:"query"},zoom:!0},treeConfig:{parentField:"pid",rowField:"id",transform:!1}}});function _(){n.query()}return(e,a)=>(S(),A(s(E),{"auto-content-height":""},{default:f(()=>[p(s(m),{onSuccess:_}),p(s(t),{"table-title":"部门列表"},{"toolbar-tools":f(()=>[p(s(M),{type:"primary",onClick:l},{default:f(()=>[p(s(F),{class:"size-5"}),$(" "+q(s(c)("ui.actionTitle.create",[s(c)("system.dept.name")])),1)]),_:1})]),_:1})]),_:1}))}});export{Y as default};
