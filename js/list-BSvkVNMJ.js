var V=(k,g,s)=>new Promise((y,m)=>{var b=a=>{try{i(s.next(a))}catch(r){m(r)}},l=a=>{try{i(s.throw(a))}catch(r){m(r)}},i=a=>a.done?y(a.value):Promise.resolve(a.value).then(b,l);i((s=s.apply(k,g)).next())});import{a4 as B,a5 as v,$ as c,E as z,a6 as E,_ as F}from"./bootstrap-CRMPbCAg.js";import"./css-Y7-lT1k2.js";import{u as N}from"./vxe-table-3fC9prEm.js";import{_ as S,u as T}from"./form.vue_vue_type_script_setup_true_lang-KBGLFOcK.js";import{_ as j}from"./menu-badge.vue_vue_type_script_setup_true_lang-BCs6oRoY.js";import{ElButton as q}from"./index-BBB7ueyP.js";import{_ as I}from"./page.vue_vue_type_script_setup_true_lang-Jfv2R4fZ.js";import{e as G,v as u,j as d,I as p,y as f,u as t,l as _,k as M,t as $,x as L}from"../jse/index-index-BLEn1CMS.js";import{u as O}from"./use-drawer-CjwYR-wN.js";import{P}from"./plus-B6jBz6Ip.js";import"./loading-BJEPGsK4.js";import"./index-DVO058gF.js";import"./debounce-DNXs5Rvf.js";import"./index-CQxSKuWz.js";import"./scroll-xfvYtqVg.js";import"./index-DVi7n050.js";import"./use-form-item-C8EWOxB0.js";import"./use-form-common-props-H4BW1-Nh.js";import"./x-CYHklmN4.js";const R={class:"flex w-full items-center gap-1"},H={class:"size-5 flex-shrink-0"},J={class:"flex-auto"},K=G({__name:"list",setup(k){const[g,s]=O({connectedComponent:S,destroyOnClose:!0}),[y,m]=N({gridOptions:{columns:T(b),height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:e=>V(null,null,function*(){return yield B()})}},rowConfig:{keyField:"id"},toolbarConfig:{custom:!0,export:!1,refresh:{code:"query"},zoom:!0},treeConfig:{parentField:"pid",rowField:"id",transform:!1}}});function b({code:e,row:o}){switch(e){case"append":{r(o);break}case"delete":{A(o);break}case"edit":{i(o);break}}}function l(){m.query()}function i(e){s.setData(e).open()}function a(){s.setData({}).open()}function r(e){s.setData({pid:e.id}).open()}function A(e){const o=z.loading({content:c("ui.actionMessage.deleting",[e.name]),duration:0,key:"action_process_msg"});E(e.id).then(()=>{z.success({content:c("ui.actionMessage.deleteSuccess",[e.name]),key:"action_process_msg"}),l()}).catch(()=>{o()})}return(e,o)=>(d(),u(t(I),{"auto-content-height":""},{default:p(()=>[f(t(g),{onSuccess:l}),f(t(y),null,{"toolbar-tools":p(()=>[f(t(q),{type:"primary",onClick:a},{default:p(()=>[f(t(P),{class:"size-5"}),L(" "+$(t(c)("ui.actionTitle.create",[t(c)("system.menu.name")])),1)]),_:1})]),title:p(({row:n})=>{var h,C,x,D;return[_("div",R,[_("div",H,[n.type==="button"?(d(),u(t(v),{key:0,icon:"carbon:security",class:"size-full"})):(h=n.meta)!=null&&h.icon?(d(),u(t(v),{key:1,icon:((C=n.meta)==null?void 0:C.icon)||"carbon:circle-dash",class:"size-full"},null,8,["icon"])):M("",!0)]),_("span",J,$(t(c)((x=n.meta)==null?void 0:x.title)),1),o[0]||(o[0]=_("div",{class:"items-center justify-end"},null,-1))]),(D=n.meta)!=null&&D.badgeType?(d(),u(t(j),{key:0,class:"menu-badge",badge:n.meta.badge,"badge-type":n.meta.badgeType,"badge-variants":n.meta.badgeVariants},null,8,["badge","badge-type","badge-variants"])):M("",!0)]}),_:1})]),_:1}))}}),pe=F(K,[["__scopeId","data-v-9fe99992"]]);export{pe as default};
