import{$ as e}from"./bootstrap-CRMPbCAg.js";import{u as d,_ as x}from"./use-echarts-CIfR12Mn.js";import{e as D,r as I,o as R,w as C,v as w,j as _,u as E}from"../jse/index-index-BLEn1CMS.js";const z=D({__name:"energy-storage-income-chart",props:{reportType:{default:"monthly"},chartData:{default:()=>[]}},setup(m){const o=m,n=I(),{renderEcharts:h}=d(n);function f(){const i=o.chartData.length>0?o.chartData.map(t=>t.time):o.reportType==="monthly"?["2024-01-01","2024-01-02","2024-01-03","2024-01-04","2024-01-05","2024-01-06","2024-01-07"]:["2024-01","2024-02","2024-03","2024-04","2024-05","2024-06","2024-07"],c=o.chartData.length>0?o.chartData.map(t=>t.totalChargingElectricity||0):[120,135,148,162,158,168,175],l=o.chartData.length>0?o.chartData.map(t=>t.totalDischargingElectricity||0):[110,125,138,152,148,158,165],g=o.chartData.length>0?o.chartData.map(t=>t.totalChargingCost||0):[85,95,105,115,112,118,125],y=o.chartData.length>0?o.chartData.map(t=>t.totalDischargingIncome||0):[150,165,180,195,192,202,210];return console.log("图表数据调试:",{chartDataLength:o.chartData.length,chargingData:c,dischargingData:l,costData:g,incomeData:y,sampleItem:o.chartData[0]}),{toolbox:{feature:{saveAsImage:{title:e("system.energyStorageIncomeReport.chart.saveAsImage")},dataZoom:{title:{zoom:e("system.energyStorageIncomeReport.chart.dataZoom"),back:e("system.energyStorageIncomeReport.chart.dataZoomReset")}},restore:{title:e("system.energyStorageIncomeReport.chart.restore")},dataView:{title:e("system.energyStorageIncomeReport.chart.dataView"),readOnly:!1}},right:"3%",top:"2%"},grid:{bottom:"15%",containLabel:!0,left:"1%",right:"1%",top:"18%"},legend:{top:"2%",data:[e("system.energyStorageIncomeReport.chart.totalChargingElectricity"),e("system.energyStorageIncomeReport.chart.totalDischargingElectricity"),e("system.energyStorageIncomeReport.chart.totalChargingCost"),e("system.energyStorageIncomeReport.chart.totalDischargingIncome")],textStyle:{color:"#6b7280",fontSize:11}},series:[{name:e("system.energyStorageIncomeReport.chart.totalChargingElectricity"),data:c,type:"line",smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.3)"},{offset:1,color:"rgba(59, 130, 246, 0.05)"}]}},lineStyle:{color:"#3b82f6",width:2},itemStyle:{color:"#3b82f6"},symbol:"circle",symbolSize:4},{name:e("system.energyStorageIncomeReport.chart.totalDischargingElectricity"),data:l,type:"line",smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(16, 185, 129, 0.3)"},{offset:1,color:"rgba(16, 185, 129, 0.05)"}]}},lineStyle:{color:"#10b981",width:2},itemStyle:{color:"#10b981"},symbol:"circle",symbolSize:4},{name:e("system.energyStorageIncomeReport.chart.totalChargingCost"),data:g,type:"line",smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(245, 158, 11, 0.3)"},{offset:1,color:"rgba(245, 158, 11, 0.05)"}]}},lineStyle:{color:"#f59e0b",width:2},itemStyle:{color:"#f59e0b"},symbol:"circle",symbolSize:4},{name:e("system.energyStorageIncomeReport.chart.totalDischargingIncome"),data:y,type:"line",smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(239, 68, 68, 0.3)"},{offset:1,color:"rgba(239, 68, 68, 0.05)"}]}},lineStyle:{color:"#ef4444",width:2},itemStyle:{color:"#ef4444"},symbol:"circle",symbolSize:4}],tooltip:{trigger:"axis",axisPointer:{type:"cross",lineStyle:{color:"#10b981",width:1}},formatter(t){let r=`${t[0].axisValue}<br/>`;return t.forEach(a=>{const p=e("system.energyStorageIncomeReport.chart.totalChargingCost"),S=e("system.energyStorageIncomeReport.chart.totalDischargingIncome"),u=a.seriesName===p||a.seriesName===S?e("system.energyStorageIncomeReport.chart.unitCurrency"):e("system.energyStorageIncomeReport.chart.unitElectricity"),b=typeof a.value=="number"?a.value.toFixed(2):a.value;r+=`${a.marker}${a.seriesName}: ${b} ${u}<br/>`}),r}},xAxis:{axisTick:{show:!0,lineStyle:{color:"#d1d5db",width:1},length:6,alignWithLabel:!0},boundaryGap:!1,data:i,type:"category",axisLine:{lineStyle:{color:"#e5e7eb"}},axisLabel:{color:"#6b7280",fontSize:11,margin:8,formatter:function(t){if(t.includes("-")){const r=t.split("-");if(r.length===3)return`${r[1]}-${r[2]}`;if(r.length===2)return t}return t}},splitLine:{show:!1}},yAxis:{axisTick:{show:!1},type:"value",axisLine:{show:!1},axisLabel:{color:"#6b7280",fontSize:11,formatter:function(t){return t>=1e3?(t/1e3).toFixed(1)+"k":t.toString()}},splitLine:{lineStyle:{color:"#f3f4f6",type:"dashed"}},min:0,scale:!0}}}function s(){h(f())}return R(()=>{s()}),C(()=>[o.reportType,o.chartData],()=>{s()},{deep:!0}),(i,c)=>(_(),w(E(x),{ref_key:"chartRef",ref:n,height:"100%"},null,512))}});export{z as _};
