var _=(S,p,r)=>new Promise((v,h)=>{var y=i=>{try{f(r.next(i))}catch(a){h(a)}},g=i=>{try{f(r.throw(i))}catch(a){h(a)}},f=i=>i.done?v(i.value):Promise.resolve(i.value).then(y,g);f((r=r.apply(S,p)).next())});import{_ as B}from"./solar-generation-chart.vue_vue_type_script_setup_true_lang-CBxOKMK-.js";import{_ as D}from"./energy-storage-chart.vue_vue_type_script_setup_true_lang-02KYHIlj.js";import{_ as E}from"./power-consumption-chart.vue_vue_type_script_setup_true_lang-CnXfI5rK.js";import{_ as d}from"./EnergyDataCard.vue_vue_type_script_setup_true_lang-De739-Je.js";import T from"./SearchSelector-BOcjX1rX.js";import{_ as W}from"./CompanyMetricsAnalysis.vue_vue_type_script_setup_true_lang-S02Je3Mp.js";import{s as $,g as j}from"./companyService-UF3LSOFm.js";import{_ as x}from"./analysis-chart-card.vue_vue_type_script_setup_true_lang-NJj6wFQc.js";import{e as N,r as b,w as I,h as w,j as M,l as t,y as l,I as m,u,t as n,n as k}from"../jse/index-index-CClcjv6z.js";import{_ as V}from"./bootstrap-DKNppDM-.js";import"./use-echarts-CEbmR3WJ.js";/* empty css                  */import"./el-popover-Bz24p6UJ.js";import"./index-BTdHKsqd.js";import"./index-CL-GF0I0.js";import"./_arrayPush-BBRYry4V.js";import"./index-DbQGFv3H.js";import"./use-form-item-94WQABG4.js";import"./use-form-common-props-CFNhUBoH.js";import"./css-B_CDxaI0.js";import"./css-B9p04GUO.js";import"./index-DlI7P0K8.js";import"./browser-auKJFWin.js";import"./event-BB_Ol6Sd.js";import"./index-C7broldF.js";import"./index-BpRugPLb.js";import"./error-Cq9Fpw4b.js";import"./index-CB6HUdZy.js";import"./index-BLKRwB_-.js";import"./CompanyMetricsChart.vue_vue_type_script_setup_true_lang-D2w1xzmZ.js";const F={class:"flex h-full flex-col gap-4 p-5"},O={class:"flex h-[48%] flex-col justify-between gap-4 lg:flex-row"},z={class:"flex flex-1 flex-col"},U={class:"bg-gray-50 rounded-lg p-4 space-y-3"},q={class:"flex items-center space-x-3"},A={class:"flex items-center space-x-2 min-w-0 flex-1 overflow-hidden"},G={class:"flex-1 min-w-48 h-10"},H={class:"company-option"},J={class:"company-header"},K={class:"company-name"},P={class:"company-badges"},Q={class:"company-meta"},R={class:"company-info-row"},X={class:"company-code"},Y={class:"company-date"},Z={class:"company-industry"},ee={key:0,class:"space-y-3"},te={class:"flex items-center space-x-3"},ae={class:"flex items-center space-x-2 min-w-0 flex-1 overflow-hidden"},se={class:"font-semibold text-base text-gray-800 font-mono truncate"},oe={class:"flex items-center space-x-3"},le={class:"flex items-center space-x-2 min-w-0 flex-1 overflow-hidden"},re={class:"font-semibold text-base text-gray-800"},ne={class:"font-semibold text-base text-gray-800"},ie={class:"flex items-center space-x-3"},ce={class:"flex items-center space-x-2 min-w-0 flex-1 overflow-hidden"},de={class:"font-semibold text-base text-gray-800"},me={class:"text-sm text-gray-600"},ue={class:"flex items-start space-x-3"},pe={class:"flex items-start space-x-2 min-w-0 flex-1 overflow-hidden"},ge={class:"font-semibold text-base text-gray-800 leading-relaxed line-clamp-2"},fe={key:1,class:"flex items-center justify-center py-8"},xe={class:"flex flex-1"},he={class:"grid grid-cols-2 gap-4 w-full lg:grid-cols-3"},ye={class:"flex h-[50%] flex-col justify-between gap-4 md:flex-row"},ve={class:"flex-1 h-full"},_e={class:"flex-1 h-full"},be={class:"flex-1 h-full"},we=N({name:"EnergyOverview",__name:"index",setup(S){const p=b(),r=b(null),v=o=>{switch(o){case"大型":return"scale-large";case"中型":return"scale-medium";case"小型":return"scale-small";default:return""}},h=o=>({新能源:"type-new-energy",光伏:"type-solar",储能:"type-storage",风电:"type-wind",水电:"type-hydro",氢能:"type-hydrogen",智能电网:"type-smart-grid",分布式能源:"type-distributed",节能环保:"type-environmental",海洋能源:"type-marine",绿色建筑:"type-green-building",生物质能源:"type-biomass",清洁能源:"type-clean",可再生能源:"type-renewable",能源管理:"type-management",环保能源:"type-eco",绿色电力:"type-green-power"})[o||""]||"type-default",y=o=>{if(!o)return g();const e=g(),s=f(o.scale),c=i(o.type);return{solar:{generation:Math.round(e.solar.generation*s*c.solar+Math.random()*200),gridTied:Math.round(e.solar.gridTied*s*c.solar+Math.random()*150)},storage:{charging:Math.round(e.storage.charging*s*c.storage+Math.random()*100),discharging:Math.round(e.storage.discharging*s*c.storage+Math.random()*80)},consumption:{electricity:Math.round(e.consumption.electricity*s+Math.random()*300),water:Math.round(e.consumption.water*s+Math.random()*20)},social:{coal:Number((e.social.coal*s+Math.random()*.5).toFixed(2)),emission:Number((e.social.emission*s+Math.random()*1).toFixed(2))},economic:{solar:Math.round(e.economic.solar*s*c.solar+Math.random()*500),storage:Math.round(e.economic.storage*s*c.storage+Math.random()*300),charging:Math.round(e.economic.charging*s+Math.random()*400)}}},g=()=>({solar:{generation:1234,gridTied:1100},storage:{charging:856,discharging:742},consumption:{electricity:2156,water:45},social:{coal:.86,emission:2.14},economic:{solar:1234,storage:567,charging:890}}),f=o=>{switch(o){case"大型":return 1.5;case"中型":return 1;case"小型":return .6;default:return 1}},i=o=>({光伏:{solar:2,storage:1.2},储能:{solar:1.2,storage:2},新能源:{solar:1.5,storage:1.5},风电:{solar:.8,storage:1.3},水电:{solar:.5,storage:1.1},氢能:{solar:1.3,storage:1.8},智能电网:{solar:1.1,storage:1.4},分布式能源:{solar:1.4,storage:1.6}})[o||""]||{solar:1,storage:1},a=b(g()),C=(o,e)=>_(null,null,function*(){console.log("选择的企业:",e.label,"值:",o),console.log("企业详情:",e),r.value=e,a.value=y(e)}),L=o=>{console.error("加载企业数据失败:",o)};return I(p,o=>_(null,null,function*(){if(o&&typeof o=="string")try{const e=yield j(o);e&&(r.value=e,a.value=y(e))}catch(e){console.error("获取企业详情失败:",e)}})),(o,e)=>(M(),w("div",F,[t("div",O,[l(u(x),{class:"flex h-full w-full flex-col lg:w-1/3",title:"企业信息"},{default:m(()=>[t("div",z,[t("div",U,[t("div",q,[e[2]||(e[2]=t("span",{class:"icon-[mdi--office-building] text-xl text-blue-600 flex-shrink-0"},null,-1)),t("div",A,[e[1]||(e[1]=t("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap"},"企业:",-1)),t("div",G,[l(T,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),"data-source":u($),placeholder:"请选择企业","search-placeholder":"搜索企业名称、类型、地址或行业","popover-width":500,"debounce-delay":300,"min-search-length":0,remote:"",onChange:C,onLoadError:L,class:"w-full h-full"},{option:m(({option:s})=>[t("div",H,[t("div",J,[t("div",K,n(s.label),1),t("div",P,[t("span",{class:k(["company-type-badge",h(s.type)])},n(s.type),3),t("span",{class:k(["company-scale-badge",v(s.scale)])},n(s.scale),3)])]),t("div",Q,[t("div",R,[t("span",X,n(s.code),1),t("span",Y,n(s.establishDate),1)]),t("div",Z,n(s.industry),1)])])]),_:1},8,["modelValue","data-source"])])])]),r.value?(M(),w("div",ee,[t("div",te,[e[4]||(e[4]=t("span",{class:"icon-[mdi--card-account-details] text-xl text-green-600 flex-shrink-0"},null,-1)),t("div",ae,[e[3]||(e[3]=t("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap"},"信用编码:",-1)),t("span",se,n(r.value.code),1)])]),t("div",oe,[e[7]||(e[7]=t("span",{class:"icon-[mdi--domain] text-xl text-purple-600 flex-shrink-0"},null,-1)),t("div",le,[e[5]||(e[5]=t("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap"},"类型:",-1)),t("span",re,n(r.value.type),1),e[6]||(e[6]=t("span",{class:"text-sm text-gray-500"},"|",-1)),t("span",ne,n(r.value.scale)+"企业",1)])]),t("div",ie,[e[10]||(e[10]=t("span",{class:"icon-[mdi--calendar] text-xl text-orange-600 flex-shrink-0"},null,-1)),t("div",ce,[e[8]||(e[8]=t("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap"},"成立:",-1)),t("span",de,n(r.value.establishDate),1),e[9]||(e[9]=t("span",{class:"text-sm text-gray-500"},"|",-1)),t("span",me,n(r.value.industry),1)])]),t("div",ue,[e[12]||(e[12]=t("span",{class:"icon-[mdi--map-marker] text-xl text-red-500 flex-shrink-0 mt-0.5"},null,-1)),t("div",pe,[e[11]||(e[11]=t("span",{class:"text-sm text-gray-600 font-medium whitespace-nowrap mt-0.5"},"地址:",-1)),t("span",ge,n(r.value.address),1)])])])):(M(),w("div",fe,e[13]||(e[13]=[t("div",{class:"text-center text-gray-500 flex items-center"},[t("span",{class:"icon-[mdi--information-outline] text-3xl block"}),t("p",{class:"ml-1 text-sm"},"请选择企业查看详细信息")],-1)])))]),l(W,{title:"企业指标分析","station-normal":82,"station-abnormal":18,"gateway-normal":91,"gateway-abnormal":9,"monitor-normal":88,"monitor-abnormal":12,"inverter-normal":76,"inverter-abnormal":24,"charging-normal":94,"charging-abnormal":6})])]),_:1}),l(u(x),{class:"flex h-full w-full flex-col lg:w-2/3",title:"企业用能信息"},{default:m(()=>[t("div",xe,[t("div",he,[l(d,{title:"光伏",data:[{label:"当日发电量",value:a.value.solar.generation.toLocaleString(),unit:"kWh"},{label:"当日并网量",value:a.value.solar.gridTied.toLocaleString(),unit:"kWh"}],"icon-class":"icon-[mdi--solar-power]",color:"text-yellow-500","border-color":"border-yellow-400"},null,8,["data"]),l(d,{title:"储能",data:[{label:"当日充电量",value:a.value.storage.charging.toLocaleString(),unit:"kWh"},{label:"当日放电量",value:a.value.storage.discharging.toLocaleString(),unit:"kWh"}],"icon-class":"icon-[mdi--battery-charging]",color:"text-green-500","border-color":"border-green-400"},null,8,["data"]),l(d,{title:"能耗",data:[{label:"当日用电量",value:a.value.consumption.electricity.toLocaleString(),unit:"kWh"},{label:"当日用水量",value:a.value.consumption.water.toLocaleString(),unit:"m³"}],"icon-class":"icon-[mdi--flash]",color:"text-blue-500","border-color":"border-blue-400"},null,8,["data"]),l(d,{title:"社会效益",data:[{label:"标准煤",value:a.value.social.coal.toString(),unit:"t"},{label:"减排量",value:a.value.social.emission.toString(),unit:"tCO₂"}],"icon-class":"icon-[mdi--leaf]",color:"text-emerald-500","border-color":"border-emerald-400"},null,8,["data"]),l(d,{title:"经济收益",data:[{label:"光伏收益",value:a.value.economic.solar.toLocaleString(),unit:"元"},{label:"储能收益",value:a.value.economic.storage.toLocaleString(),unit:"元"},{label:"充电桩收益",value:a.value.economic.charging.toLocaleString(),unit:"元"}],"icon-class":"icon-[mdi--currency-cny]",color:"text-orange-500","border-color":"border-orange-400"},null,8,["data"]),l(d,{title:"总览",data:[{label:"总节能量",value:(a.value.solar.generation+a.value.storage.discharging).toLocaleString(),unit:"kWh"},{label:"总收益",value:(a.value.economic.solar+a.value.economic.storage+a.value.economic.charging).toLocaleString(),unit:"元"}],"icon-class":"icon-[mdi--chart-line]",color:"text-purple-500","border-color":"border-purple-400"},null,8,["data"])])])]),_:1})]),t("div",ye,[l(u(x),{class:"flex h-full w-full flex-col md:w-1/3",title:"光伏发电趋势"},{default:m(()=>[t("div",ve,[l(B)])]),_:1}),l(u(x),{class:"flex h-full w-full flex-col md:w-1/3",title:"储能放电趋势"},{default:m(()=>[t("div",_e,[l(D)])]),_:1}),l(u(x),{class:"flex h-full w-full flex-col md:w-1/3",title:"用电趋势"},{default:m(()=>[t("div",be,[l(E)])]),_:1})])]))}}),et=V(we,[["__scopeId","data-v-755dea36"]]);export{et as default};
