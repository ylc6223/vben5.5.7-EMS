var Le=Object.defineProperty,Ne=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var G=(o,t,s)=>t in o?Le(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,h=(o,t)=>{for(var s in t||(t={}))ne.call(t,s)&&G(o,s,t[s]);if(K)for(var s of K(t))le.call(t,s)&&G(o,s,t[s]);return o},T=(o,t)=>Ne(o,je(t));var E=(o,t)=>{var s={};for(var a in o)ne.call(o,a)&&t.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&K)for(var a of K(o))t.indexOf(a)<0&&le.call(o,a)&&(s[a]=o[a]);return s};var V=(o,t,s)=>G(o,typeof t!="symbol"?t+"":t,s);var J=(o,t,s)=>new Promise((a,c)=>{var r=b=>{try{_(s.next(b))}catch(i){c(i)}},w=b=>{try{_(s.throw(b))}catch(i){c(i)}},_=b=>b.done?a(b.value):Promise.resolve(b.value).then(r,w);_((s=s.apply(o,t)).next())});import{e as C,c as I,v as p,j as d,u as e,X as U,m as B,I as f,h as X,k as v,t as P,n as A,V as he,W as ye,p as y,B as be,r as M,y as D,q as We,at as Ke,w as Je,l as Q,x as F,H as re,ae as _e,au as Ue,a as Xe,J as He,av as qe,K as ie,s as ve}from"../jse/index-index-CClcjv6z.js";import{b1 as Ye,at as Ge,X as we,b2 as Qe,b3 as Ze,b4 as et,b5 as tt,as as st,b6 as ot,b7 as at,b8 as nt,b9 as lt,ba as rt,bb as it,bc as dt,bd as ct,b0 as de,be as ut,bf as ce,k as ue,bg as pt,bh as ft}from"./bootstrap-DKNppDM-.js";import{X as pe}from"./x-D_Pq9Xi1.js";import{V as mt}from"./loading-CMDzNo7D.js";const ht=C({__name:"Separator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{},label:{}},setup(o){const t=o,s=I(()=>{const r=t,{class:a}=r;return E(r,["class"])});return(a,c)=>(d(),p(e(Ye),U(s.value,{class:e(B)("bg-border relative shrink-0",t.orientation==="vertical"?"h-full w-px":"h-px w-full",t.class)}),{default:f(()=>[t.label?(d(),X("span",{key:0,class:A(e(B)("text-muted-foreground bg-background absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center justify-center text-xs",t.orientation==="vertical"?"w-[1px] px-1 py-2":"h-[1px] px-2 py-1"))},P(t.label),3)):v("",!0)]),_:1},16,["class"]))}}),yt=Ge("bg-background shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 border-border",{defaultVariants:{side:"right"},variants:{side:{bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left ",right:"inset-y-0 right-0 w-3/4 border-l  data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top"}}}),bt=C({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:t}){const c=we(o,t);return(r,w)=>(d(),p(e(Qe),he(ye(e(c))),{default:f(()=>[y(r.$slots,"default")]),_:3},16))}}),fe=C({__name:"SheetClose",props:{asChild:{type:Boolean},as:{}},setup(o){const t=o;return(s,a)=>(d(),p(e(Ze),he(ye(t)),{default:f(()=>[y(s.$slots,"default")]),_:3},16))}}),_t=["data-dismissable-drawer"],vt=C({__name:"SheetOverlay",setup(o){et();const t=be("DISMISSABLE_DRAWER_ID");return(s,a)=>(d(),X("div",{"data-dismissable-drawer":e(t),class:"bg-overlay z-popup inset-0"},null,8,_t))}}),wt=C({inheritAttrs:!1,__name:"SheetContent",props:{appendTo:{default:"body"},class:{},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},side:{},zIndex:{},forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(o,{emit:t}){const s=o,a=t,c=I(()=>{const $=s,{class:l,modal:m,open:u,side:O}=$;return E($,["class","modal","open","side"])});function r(){return s.appendTo==="body"||s.appendTo===document.body||!s.appendTo}const w=I(()=>r()?"fixed":"absolute"),_=we(c,a),b=M(null);function i(l){var m;l.target===((m=b.value)==null?void 0:m.$el)&&(s.open?a("opened"):a("closed"))}return(l,m)=>(d(),p(e(tt),{to:l.appendTo},{default:f(()=>[D(st,{name:"fade"},{default:f(()=>[l.open&&l.modal?(d(),p(vt,{key:0,style:We(T(h({},l.zIndex?{zIndex:l.zIndex}:{}),{position:w.value,backdropFilter:l.overlayBlur&&l.overlayBlur>0?`blur(${l.overlayBlur}px)`:"none"}))},null,8,["style"])):v("",!0)]),_:1}),D(e(ot),U({ref_key:"contentRef",ref:b,class:e(B)("z-popup",e(yt)({side:l.side}),s.class),style:T(h({},l.zIndex?{zIndex:l.zIndex}:{}),{position:w.value}),onAnimationend:i},h(h({},e(_)),l.$attrs)),{default:f(()=>[y(l.$slots,"default")]),_:3},16,["class","style"])]),_:3},8,["to"]))}}),Z=C({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const t=o,s=I(()=>{const r=t,{class:a}=r;return E(r,["class"])});return(a,c)=>(d(),p(e(at),U({class:e(B)("text-muted-foreground text-sm",t.class)},s.value),{default:f(()=>[y(a.$slots,"default")]),_:3},16,["class"]))}}),gt=C({__name:"SheetFooter",props:{class:{}},setup(o){const t=o;return(s,a)=>(d(),X("div",{class:A(e(B)("flex flex-row flex-col-reverse justify-end gap-x-2",t.class))},[y(s.$slots,"default")],2))}}),Ct=C({__name:"SheetHeader",props:{class:{}},setup(o){const t=o;return(s,a)=>(d(),X("div",{class:A(e(B)("flex flex-col text-center sm:text-left",t.class))},[y(s.$slots,"default")],2))}}),ee=C({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const t=o,s=I(()=>{const r=t,{class:a}=r;return E(r,["class"])});return(a,c)=>(d(),p(e(nt),U({class:e(B)("text-foreground font-medium",t.class)},s.value),{default:f(()=>[y(a.$slots,"default")]),_:3},16,["class"]))}}),Bt={class:"flex items-center"},Ot={class:"flex-center"},xt=C({__name:"drawer",props:{drawerApi:{default:void 0},appendToMain:{type:Boolean,default:!1},cancelText:{},class:{},closable:{type:Boolean},closeIconPlacement:{default:"right"},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},destroyOnClose:{type:Boolean,default:!1},footer:{type:Boolean},footerClass:{},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},placement:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},submitting:{type:Boolean,default:!1},title:{},titleTooltip:{},zIndex:{default:1e3}},setup(o){var j,ae;const t=o,s=lt.getComponents(),a=Ke();_e("DISMISSABLE_DRAWER_ID",a);const c=M(),{$t:r}=rt(),{isMobile:w}=it(),_=(ae=(j=t.drawerApi)==null?void 0:j.useStore)==null?void 0:ae.call(j),{appendToMain:b,cancelText:i,class:l,closable:m,closeIconPlacement:u,closeOnClickModal:O,closeOnPressEscape:k,confirmLoading:$,confirmText:H,contentClass:ge,description:L,destroyOnClose:Ce,footer:Be,footerClass:Oe,header:xe,headerClass:De,loading:te,modal:ke,openAutoFocus:Se,overlayBlur:$e,placement:z,showCancelButton:Ae,showConfirmButton:Ie,submitting:x,title:N,titleTooltip:se,zIndex:Te}=dt(t,_);function Ee(n){(!O.value||x.value)&&n.preventDefault()}function Pe(n){(!k.value||x.value)&&n.preventDefault()}function ze(n){const g=n.target,W=g==null?void 0:g.dataset.dismissableDrawer;(x.value||!O.value||W!==a)&&n.preventDefault()}function Re(n){Se.value||n==null||n.preventDefault()}function oe(n){n.preventDefault(),n.stopPropagation()}const Ve=I(()=>b.value?`#${ct}>div:not(.absolute)>div`:void 0),q=M(!1),Y=M(!0);Je(()=>{var n;return(n=_==null?void 0:_.value)==null?void 0:n.isOpen},n=>{Y.value=!1,n&&!e(q)&&(q.value=!0)});function Fe(){var n;Y.value=!0,(n=t.drawerApi)==null||n.onClosed()}const Me=I(()=>!e(Ce)&&e(q));return(n,g)=>{var W;return d(),p(e(bt),{modal:!1,open:(W=e(_))==null?void 0:W.isOpen,"onUpdate:open":g[3]||(g[3]=()=>{var R;return(R=n.drawerApi)==null?void 0:R.close()})},{default:f(()=>{var R;return[D(e(wt),{"append-to":Ve.value,class:A(e(B)("flex w-[520px] flex-col",e(l),{"!w-full":e(w)||e(z)==="bottom"||e(z)==="top","max-h-[100vh]":e(z)==="bottom"||e(z)==="top",hidden:Y.value})),modal:e(ke),open:(R=e(_))==null?void 0:R.isOpen,side:e(z),"z-index":e(Te),"force-mount":Me.value,"overlay-blur":e($e),onCloseAutoFocus:oe,onClosed:Fe,onEscapeKeyDown:Pe,onFocusOutside:oe,onInteractOutside:Ee,onOpenAutoFocus:Re,onOpened:g[2]||(g[2]=()=>{var S;return(S=n.drawerApi)==null?void 0:S.onOpened()}),onPointerDownOutside:ze},{default:f(()=>[e(xe)?(d(),p(e(Ct),{key:0,class:A(e(B)("!flex flex-row items-center justify-between border-b px-6 py-5",e(De),{"px-4 py-3":e(m),"pl-2":e(m)&&e(u)==="left"}))},{default:f(()=>[Q("div",Bt,[e(m)&&e(u)==="left"?(d(),p(e(fe),{key:0,"as-child":"",disabled:e(x),class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:f(()=>[y(n.$slots,"close-icon",{},()=>[D(e(de),null,{default:f(()=>[D(e(pe),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):v("",!0),e(m)&&e(u)==="left"?(d(),p(e(ht),{key:1,class:"ml-1 mr-2 h-8",decorative:"",orientation:"vertical"})):v("",!0),e(N)?(d(),p(e(ee),{key:2,class:"text-left"},{default:f(()=>[y(n.$slots,"title",{},()=>[F(P(e(N))+" ",1),e(se)?(d(),p(e(ut),{key:0,"trigger-class":"pb-1"},{default:f(()=>[F(P(e(se)),1)]),_:1})):v("",!0)])]),_:3})):v("",!0),e(L)?(d(),p(e(Z),{key:3,class:"mt-1 text-xs"},{default:f(()=>[y(n.$slots,"description",{},()=>[F(P(e(L)),1)])]),_:3})):v("",!0)]),!e(N)||!e(L)?(d(),p(e(ce),{key:0},{default:f(()=>[e(N)?v("",!0):(d(),p(e(ee),{key:0})),e(L)?v("",!0):(d(),p(e(Z),{key:1}))]),_:1})):v("",!0),Q("div",Ot,[y(n.$slots,"extra"),e(m)&&e(u)==="right"?(d(),p(e(fe),{key:0,"as-child":"",disabled:e(x),class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:f(()=>[y(n.$slots,"close-icon",{},()=>[D(e(de),null,{default:f(()=>[D(e(pe),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):v("",!0)])]),_:3},8,["class"])):(d(),p(e(ce),{key:1},{default:f(()=>[D(e(ee)),D(e(Z))]),_:1})),Q("div",{ref_key:"wrapperRef",ref:c,class:A(e(B)("relative flex-1 overflow-y-auto p-3",e(ge),{"pointer-events-none":e(te)||e(x)}))},[y(n.$slots,"default")],2),e(te)||e(x)?(d(),p(e(mt),{key:2,spinning:""})):v("",!0),e(Be)?(d(),p(e(gt),{key:3,class:A(e(B)("w-full flex-row items-center justify-end border-t p-2 px-3",e(Oe)))},{default:f(()=>[y(n.$slots,"prepend-footer"),y(n.$slots,"footer",{},()=>[e(Ae)?(d(),p(re(e(s).DefaultButton||e(ue)),{key:0,variant:"ghost",disabled:e(x),onClick:g[0]||(g[0]=()=>{var S;return(S=n.drawerApi)==null?void 0:S.onCancel()})},{default:f(()=>[y(n.$slots,"cancelText",{},()=>[F(P(e(i)||e(r)("cancel")),1)])]),_:3},8,["disabled"])):v("",!0),y(n.$slots,"center-footer"),e(Ie)?(d(),p(re(e(s).PrimaryButton||e(ue)),{key:1,loading:e($)||e(x),onClick:g[1]||(g[1]=()=>{var S;return(S=n.drawerApi)==null?void 0:S.onConfirm()})},{default:f(()=>[y(n.$slots,"confirmText",{},()=>[F(P(e(H)||e(r)("confirm")),1)])]),_:3},8,["loading"])):v("",!0)]),y(n.$slots,"append-footer")]),_:3},8,["class"])):v("",!0)]),_:3},8,["append-to","class","modal","open","side","z-index","force-mount","overlay-blur"])]}),_:3},8,["open"])}}});class Dt{constructor(t={}){V(this,"sharedData",{payload:{}});V(this,"store");V(this,"api");V(this,"state");const m=t,{connectedComponent:s,onBeforeClose:a,onCancel:c,onClosed:r,onConfirm:w,onOpenChange:_,onOpened:b}=m,i=E(m,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),l={class:"",closable:!0,closeIconPlacement:"right",closeOnClickModal:!0,closeOnPressEscape:!0,confirmLoading:!1,contentClass:"",footer:!0,header:!0,isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,placement:"right",showCancelButton:!0,showConfirmButton:!0,submitting:!1,title:""};this.store=new pt(h(h({},l),i),{onUpdate:()=>{var O,k,$;const u=this.store.state;(u==null?void 0:u.isOpen)===((O=this.state)==null?void 0:O.isOpen)?this.state=u:(this.state=u,($=(k=this.api).onOpenChange)==null||$.call(k,!!(u!=null&&u.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:c,onClosed:r,onConfirm:w,onOpenChange:_,onOpened:b},Ue(this)}close(){return J(this,null,function*(){var s,a,c;((c=yield(a=(s=this.api).onBeforeClose)==null?void 0:a.call(s))!=null?c:!0)&&this.store.setState(r=>T(h({},r),{isOpen:!1,submitting:!1}))})}getData(){var t,s;return(s=(t=this.sharedData)==null?void 0:t.payload)!=null?s:{}}lock(t=!0){return this.setState({submitting:t})}onCancel(){var t,s;this.api.onCancel?(s=(t=this.api).onCancel)==null||s.call(t):this.close()}onClosed(){var t,s;this.state.isOpen||(s=(t=this.api).onClosed)==null||s.call(t)}onConfirm(){var t,s;(s=(t=this.api).onConfirm)==null||s.call(t)}onOpened(){var t,s;this.state.isOpen&&((s=(t=this.api).onOpened)==null||s.call(t))}open(){this.store.setState(t=>T(h({},t),{isOpen:!0}))}setData(t){return this.sharedData.payload=t,this}setState(t){return Xe(t)?this.store.setState(t):this.store.setState(s=>h(h({},s),t)),this}unlock(){return this.lock(!1)}}const me=Symbol("VBEN_DRAWER_INJECT"),kt={};function Pt(o={}){var b;const{connectedComponent:t}=o;if(t){const i=He({}),l=M(!0),m=C((u,{attrs:O,slots:k})=>(_e(me,{extendApi(H){Object.setPrototypeOf(i,H)},options:o,reCreateDrawer(){return J(this,null,function*(){l.value=!1,yield ve(),l.value=!0})}}),St(i,h(h(h({},u),O),k)),()=>ie(l.value?t:"div",h(h({},u),O),k)),{name:"VbenParentDrawer",inheritAttrs:!1});return qe(()=>{var u;(u=i==null?void 0:i.close)==null||u.call(i)}),[m,i]}const s=be(me,{}),a=h(h(h({},kt),s.options),o);a.onOpenChange=i=>{var l,m,u;(l=o.onOpenChange)==null||l.call(o,i),(u=(m=s.options)==null?void 0:m.onOpenChange)==null||u.call(m,i)};const c=a.onClosed;a.onClosed=()=>{var i;c==null||c(),a.destroyOnClose&&((i=s.reCreateDrawer)==null||i.call(s))};const r=new Dt(a),w=r;w.useStore=i=>ft(r.store,i);const _=C((i,{attrs:l,slots:m})=>()=>ie(xt,T(h(h({},i),l),{drawerApi:w}),m),{name:"VbenDrawer",inheritAttrs:!1});return(b=s.extendApi)==null||b.call(s,w),[_,w]}function St(o,t){return J(this,null,function*(){var c;if(!t||Object.keys(t).length===0)return;yield ve();const s=(c=o==null?void 0:o.store)==null?void 0:c.state;if(!s)return;const a=new Set(Object.keys(s));for(const r of Object.keys(t))a.has(r)&&!["class"].includes(r)&&console.warn(`[Vben Drawer]: When 'connectedComponent' exists, do not set props or slots '${r}', which will increase complexity. If you need to modify the props of Drawer, please use useVbenDrawer or api.`)})}export{Pt as u};
