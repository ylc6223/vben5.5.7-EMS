var C=Object.defineProperty;var S=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var A=(o,a,e)=>a in o?C(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,x=(o,a)=>{for(var e in a||(a={}))R.call(a,e)&&A(o,e,a[e]);if(S)for(var e of S(a))T.call(a,e)&&A(o,e,a[e]);return o};var w=(o,a,e)=>new Promise((i,r)=>{var u=l=>{try{f(e.next(l))}catch(t){r(t)}},p=l=>{try{f(e.throw(l))}catch(t){r(t)}},f=l=>l.done?i(l.value):Promise.resolve(l.value).then(u,p);f((e=e.apply(o,a)).next())});import{af as z,ag as W,o as O,ah as V}from"./bootstrap-DKNppDM-.js";import{_ as Z}from"./login.vue_vue_type_script_setup_true_lang-C_BDE6uZ.js";import{r as b,E as U,a1 as q,s as D,_ as j,e as M,a2 as F,a3 as H,w as P,c as k,h as J,j as $,y as m,I as h,u as n,p as Q,M as N,v as G}from"../jse/index-index-CClcjv6z.js";import{f as K,N as X,i as Y,_ as ee}from"./layout.vue_vue_type_script_setup_true_lang-BKhNB8FK.js";import{u as ae}from"./use-modal-Dj6v69Lv.js";import{_ as te}from"./avatar.vue_vue_type_script_setup_true_lang-DyuDyCiK.js";import"./auth-title-DYjktHPo.js";import"./theme-toggle.vue_vue_type_script_setup_true_lang-BuQwRve-.js";import"./TabsList.vue_vue_type_script_setup_true_lang-DnMZ2rXM.js";import"./plus-DwcNHp58.js";import"./use-drawer-BTP_NUkU.js";import"./x-D_Pq9Xi1.js";import"./loading-CMDzNo7D.js";import"./rotate-cw-B0VaqMJ3.js";import"./menu-badge.vue_vue_type_script_setup_true_lang-CHcIIAyO.js";const d=b(),E=b(!1),_=b({advancedStyle:{colorStops:[{color:"gray",offset:0},{color:"gray",offset:1}],type:"linear"},content:"",contentType:"multi-line-text",globalAlpha:.25,gridLayoutOptions:{cols:2,gap:[20,20],matrix:[[1,0],[0,1]],rows:2},height:200,layout:"grid",rotate:30,width:160});function oe(){function o(i){return w(this,null,function*(){var u;const{Watermark:r}=yield j(()=>w(null,null,function*(){const{Watermark:p}=yield import("./index.esm-DCgfxJEb.js");return{Watermark:p}}),[]);_.value=x(x({},_.value),i),d.value=new r(_.value),yield(u=d.value)==null?void 0:u.create()})}function a(i){return w(this,null,function*(){var r;d.value?(yield D(),yield(r=d.value)==null?void 0:r.changeOptions(x(x({},_.value),i))):yield o(i)})}function e(){d.value&&(d.value.destroy(),d.value=void 0)}return E.value||(E.value=!0,U(()=>{e()})),{destroyWatermark:e,updateWatermark:a,watermark:q(d)}}const se=M({name:"LoginExpiredModal",__name:"login-expired-modal",props:F({avatar:{default:""},zIndex:{default:0},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},subTitle:{},title:{},submitButtonText:{}},{open:{type:Boolean},openModifiers:{}}),emits:["update:open"],setup(o){const a=o,e=H(o,"open"),[i,r]=ae();P(()=>e.value,t=>{r.setState({isOpen:t})});const u=k(()=>a.zIndex||l()),p=["ant-message","loading"];function f(t){return p.some(v=>t.classList.contains(v))}function l(){let t=0;return[...document.querySelectorAll("*")].forEach(y=>{const s=window.getComputedStyle(y).getPropertyValue("z-index");s&&!Number.isNaN(Number.parseInt(s))&&!f(y)&&(t=Math.max(t,Number.parseInt(s)))}),t+1}return(t,v)=>($(),J("div",null,[m(n(i),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,"z-index":u.value,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:h(()=>[m(n(te),{src:t.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),m(n(z),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":t.$t("authentication.loginAgainSubTitle"),title:t.$t("authentication.loginAgainTitle")},{default:h(()=>[Q(t.$slots,"default")]),_:3},8,["sub-title","title"])]),_:3},8,["z-index"])]))}}),_e=M({__name:"basic",setup(o){const a=b([{avatar:"https://avatar.vercel.sh/vercel.svg?text=VB",date:"3小时前",isRead:!0,message:"描述信息描述信息描述信息",title:"收到了 14 份新周报"},{avatar:"https://avatar.vercel.sh/1",date:"刚刚",isRead:!1,message:"描述信息描述信息描述信息",title:"朱偏右 回复了你"},{avatar:"https://avatar.vercel.sh/1",date:"2024-01-01",isRead:!1,message:"描述信息描述信息描述信息",title:"曲丽丽 评论了你"},{avatar:"https://avatar.vercel.sh/satori",date:"1天前",isRead:!1,message:"描述信息描述信息描述信息",title:"代办提醒"}]),e=W(),i=O(),r=V(),{destroyWatermark:u,updateWatermark:p}=oe(),f=k(()=>a.value.some(s=>!s.isRead)),l=k(()=>[]),t=k(()=>{var s,c;return(c=(s=e.userInfo)==null?void 0:s.avatar)!=null?c:N.app.defaultAvatar});function v(){return w(this,null,function*(){yield i.logout(!1)})}function y(){a.value=[]}function I(){a.value.forEach(s=>s.isRead=!0)}return P(()=>N.app.watermark,s=>w(null,null,function*(){var c,g;s?yield p({content:`${(c=e.userInfo)==null?void 0:c.username} - ${(g=e.userInfo)==null?void 0:g.realName}`}):u()}),{immediate:!0}),(s,c)=>($(),G(n(ee),{onClearPreferencesAndLogout:v},{"user-dropdown":h(()=>{var g,B,L;return[m(n(Y),{avatar:t.value,menus:l.value,text:(g=n(e).userInfo)==null?void 0:g.realName,description:(B=n(e).userInfo)==null?void 0:B.introduction,"tag-text":(L=n(e).userInfo)==null?void 0:L.posName,onLogout:v},null,8,["avatar","menus","text","description","tag-text"])]}),notification:h(()=>[m(n(X),{dot:f.value,notifications:a.value,onClear:y,onMakeAll:I},null,8,["dot","notifications"])]),extra:h(()=>[m(n(se),{open:n(r).loginExpired,"onUpdate:open":c[0]||(c[0]=g=>n(r).loginExpired=g),avatar:t.value},{default:h(()=>[m(Z)]),_:1},8,["open","avatar"])]),"lock-screen":h(()=>[m(n(K),{avatar:t.value,onToLogin:v},null,8,["avatar"])]),_:1}))}});export{_e as default};
