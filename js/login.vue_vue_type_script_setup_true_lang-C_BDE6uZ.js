var T=(w,m,s)=>new Promise((p,l)=>{var d=n=>{try{r(s.next(n))}catch(u){l(u)}},i=n=>{try{r(s.throw(n))}catch(u){l(u)}},r=n=>n.done?p(n.value):Promise.resolve(n.value).then(d,i);r((s=s.apply(w,m)).next())});import{l as R,j as V,$ as t,m as F,k as L,w as N,n as I,o as U,s as S}from"./bootstrap-DKNppDM-.js";import{T as K}from"./auth-title-DYjktHPo.js";import{e as $,J as j,c as C,r as q,o as O,h as b,j as h,p as f,y as A,k as y,I as k,x as g,t as c,u as o,l as M,v as E,n as Q}from"../jse/index-index-CClcjv6z.js";const D=["onKeydown"],z={class:"text-muted-foreground"},G={key:0,class:"mb-6 flex justify-between"},J={class:"flex-center"},Y={key:0,class:"mt-3 text-center text-sm"},H=$({name:"AuthenticationLogin",__name:"login",props:{formSchema:{default:()=>[]},codeLoginPath:{default:"/auth/code-login"},forgetPasswordPath:{default:"/auth/forget-password"},loading:{type:Boolean,default:!1},qrCodeLoginPath:{default:"/auth/qrcode-login"},registerPath:{default:"/auth/register"},showCodeLogin:{type:Boolean,default:!0},showForgetPassword:{type:Boolean,default:!0},showQrcodeLogin:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0},showRememberMe:{type:Boolean,default:!0},showThirdPartyLogin:{type:Boolean,default:!0},subTitle:{default:""},title:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(w,{expose:m,emit:s}){const p=w,l=s,[d,i]=R(j({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:C(()=>p.formSchema),showDefaultActions:!1})),r=V(),n=`REMEMBER_ME_USERNAME_${location.hostname}`,u=localStorage.getItem(n)||"",v=q(!!u);function B(){return T(this,null,function*(){const{valid:e}=yield i.validate(),a=yield i.getValues();e&&(localStorage.setItem(n,v.value?a==null?void 0:a.username:""),l("submit",a))})}function _(e){r.push(e)}return O(()=>{u&&i.setFieldValue("username",u)}),m({getFormApi:()=>i}),(e,a)=>(h(),b("div",{onKeydown:N(I(B,["prevent"]),["enter"])},[f(e.$slots,"title",{},()=>[A(K,null,{desc:k(()=>[M("span",z,[f(e.$slots,"subTitle",{},()=>[g(c(e.subTitle||o(t)("authentication.loginSubtitle")),1)])])]),default:k(()=>[f(e.$slots,"title",{},()=>[g(c(e.title||`${o(t)("authentication.welcomeBack")} ðŸ‘‹ðŸ»`),1)])]),_:3})]),A(o(d)),e.showRememberMe||e.showForgetPassword?(h(),b("div",G,[M("div",J,[e.showRememberMe?(h(),E(o(F),{key:0,checked:v.value,"onUpdate:checked":a[0]||(a[0]=P=>v.value=P),name:"rememberMe"},{default:k(()=>[g(c(o(t)("authentication.rememberMe")),1)]),_:1},8,["checked"])):y("",!0)]),e.showForgetPassword?(h(),b("span",{key:0,class:"vben-link text-sm font-normal",onClick:a[1]||(a[1]=P=>_(e.forgetPasswordPath))},c(o(t)("authentication.forgetPassword")),1)):y("",!0)])):y("",!0),A(o(L),{class:Q([{"cursor-wait":e.loading},"w-full"]),loading:e.loading,"aria-label":"login",onClick:B},{default:k(()=>[g(c(e.submitButtonText||o(t)("common.login")),1)]),_:1},8,["class","loading"]),f(e.$slots,"third-party-login"),f(e.$slots,"to-register",{},()=>[e.showRegister?(h(),b("div",Y,[g(c(o(t)("authentication.accountTip"))+" ",1),M("span",{class:"vben-link text-sm font-normal",onClick:a[2]||(a[2]=P=>_(e.registerPath))},c(o(t)("authentication.createAccount")),1)])):y("",!0)])],40,D))}}),ee=$({name:"Login",__name:"login",setup(w){const m=U(),s=[{label:"Super",value:"FAQC"},{label:"Admin",value:"admin"},{label:"User",value:"jack"}],p=C(()=>[{component:"VbenSelect",componentProps:{options:s,placeholder:t("authentication.selectAccount")},fieldName:"selectAccount",label:t("authentication.selectAccount"),rules:S().min(1,{message:t("authentication.selectAccount")}).optional().default("FAQC")},{component:"VbenInput",componentProps:{placeholder:t("authentication.usernameTip")},dependencies:{trigger(l,d){if(l.selectAccount){const i=s.find(r=>r.value===l.selectAccount);i&&d.setValues({password:"123456",account:i.value})}},triggerFields:["selectAccount"]},fieldName:"account",label:t("authentication.username"),rules:S().min(1,{message:t("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{placeholder:t("authentication.password")},fieldName:"password",label:t("authentication.password"),rules:S().min(1,{message:t("authentication.passwordTip")})}]);return(l,d)=>(h(),E(o(H),{"form-schema":p.value,loading:o(m).loginLoading,onSubmit:o(m).authLogin},null,8,["form-schema","loading","onSubmit"]))}});export{ee as _};
